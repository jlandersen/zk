#!/bin/bash

if [[ -z "${ZETTLE_HOME}" ]]; then
    echo "ZETTLE_HOME must be set"
    exit 1
fi

# Reattach explicitly if a zk session already exists instead of "new-session -A" to avoid further split windows
# shellcheck disable=SC2143
if [[ $(tmux list-sessions | grep 'zk') ]]; then
    tmux attach-session -t "zk"
else
    tmux new-session -s "zk" -c "${ZETTLE_HOME}" "bash -l -c -i vim" \; split-window -h "zk_fzf_view"\;
fi


